[![Review Assignment Due Date](https://classroom.github.com/assets/deadline-readme-button-22041afd0340ce965d47ae6ef1cefeee28c7c493a6346c4f15d667ab976d596c.svg)](https://classroom.github.com/a/0ek2UV58)

# Distributed File System - LangOS Document Collaboration

A distributed, concurrent file system implementation in C with support for multiple storage servers, concurrent access, and access control.

## ğŸ‰ Current Status: ALL PHASES COMPLETE âœ…

**Latest Achievement**: Implemented Trie + LRU Cache for efficient O(k) and O(1) file lookups!

### Working Features:
- âœ… Name Server with client and storage server management
- âœ… Storage Server registration and file storage
- âœ… Client connection and user management
- âœ… **LIST** command (show all registered users)
- âœ… **CREATE** command (create files on storage servers, sets owner)
- âœ… **READ** command (read file content with access control)
- âœ… **WRITE** command (edit files word-by-word with sentence locking + access control)
  - Interactive WRITE mode
  - Sentence-level locking for concurrency
  - Automatic file backup (.bak)
  - ETIRW to end write session
- âœ… **UNDO** command (revert file to previous .bak version)
- âœ… **INFO** command (show file owner and access list)
- âœ… **ADDACCESS** command (grant user access to file - owner only)
- âœ… **REMACCESS** command (revoke user access - owner only)
- âœ… **EXEC** command (execute shell scripts from the file system)
  - Name Server fetches file from Storage Server
  - Executes script and captures output
  - Returns output and exit status to client
  - Access control enforced
- âœ… **Trie + LRU Cache** (efficient file lookups)
  - O(1) cache hits for frequently accessed files
  - O(k) Trie lookup for cache misses (k = filename length)
  - 20-entry LRU cache with automatic eviction
  - Thread-safe concurrent access
- âœ… **Access Control** (only owner + access list can READ/WRITE/EXEC)
- âœ… Multi-threaded concurrent operations
- âœ… Comprehensive error handling
- âœ… High-performance file system (Trie + Cache optimization)

### Quick Start:
```bash
# Build everything
make

# Run quick demo
./demo.sh

# Or start manually:
# Terminal 1: Start system
./run_system.sh

# Terminal 2: Run client
./bin/client

# Try commands: CREATE, READ, WRITE, INFO, EXEC, etc.
```

### Commands Overview:
```bash
LIST                           # Show registered users
CREATE <filename>              # Create new file
READ <filename>                # Read file content
WRITE <filename> <mode>        # Interactive writing
INFO <filename>                # Show owner and access list
ADDACCESS <filename> <user>    # Grant access (owner only)
REMACCESS <filename> <user>    # Revoke access (owner only)
EXEC <filename>                # Execute script
UNDO <filename>                # Restore from backup
EXIT                           # Quit client
```

## ğŸŒ Network Setup (Testing Between Computers)

```bash
# Computer A (Name Server):
hostname -I  # Get your IP (e.g., 192.168.1.100)
./bin/nameserver

# Computer B (Storage Server):
./bin/storageserver 192.168.1.100 9003

# Any Computer (Client):
./bin/client 192.168.1.100
```

**See [DOCS.md](DOCS.md) for complete documentation**

## Project Structure

```
course-project-atari/
â”œâ”€â”€ bin/                      # Compiled executables (generated by make)
â”‚   â”œâ”€â”€ nameserver           # Name Server executable
â”‚   â”œâ”€â”€ storageserver        # Storage Server executable
â”‚   â””â”€â”€ client               # Client executable
â”œâ”€â”€ include/                  # Header files
â”‚   â”œâ”€â”€ common.h             # Common definitions and constants
â”‚   â””â”€â”€ socket_utils.h       # Socket utility function declarations
â”œâ”€â”€ src/                      # Source code
â”‚   â”œâ”€â”€ common/              # Shared utility implementations
â”‚   â”‚   â””â”€â”€ socket_utils.c
â”‚   â”œâ”€â”€ nameserver/          # Name Server implementation
â”‚   â”‚   â””â”€â”€ nameserver.c
â”‚   â”œâ”€â”€ storageserver/       # Storage Server implementation
â”‚   â”‚   â””â”€â”€ storageserver.c
â”‚   â””â”€â”€ client/              # Client implementation
â”‚       â””â”€â”€ client.c
â”œâ”€â”€ obj/                      # Object files (generated by make)
â”œâ”€â”€ logs/                     # Log files for NS and SS
â”œâ”€â”€ storage/                  # Storage server file storage
â”‚   â”œâ”€â”€ ss1/                 # Storage Server 1 files
â”‚   â”œâ”€â”€ ss2/                 # Storage Server 2 files
â”‚   â””â”€â”€ ss3/                 # Storage Server 3 files
â”œâ”€â”€ data/                     # Metadata and persistence files
â”œâ”€â”€ Makefile                  # Build configuration
â””â”€â”€ README.md                 # This file
```

## Building the Project

### Compile all components:
```bash
make
```

### Clean build artifacts:
```bash
make clean
```

### Rebuild from scratch:
```bash
make rebuild
```

## Running the System

### Start the Name Server:
```bash
./bin/nameserver
```
or
```bash
make run-ns
```

### Start a Storage Server:
```bash
./bin/storageserver
```
or
```bash
make run-ss
```

### Start a Client:
```bash
./bin/client
```
or
```bash
make run-client
```

## System Architecture

- **Name Server (NS)**: Central coordinator managing metadata, file locations, and access control
- **Storage Servers (SS)**: Multiple instances storing actual file data with persistence
- **Clients**: Command-line interface for users to interact with the system

## Development Status

- [x] Phase 0: Project setup and socket utilities
- [x] Phase 1-3: Basic NS and SS with file operations (CREATE, READ, WRITE, LIST)
- [x] Phase 4: Sentence-level locking for concurrent WRITE operations
- [x] Phase 5.1: UNDO command + Access control (owner, access lists, INFO, ADDACCESS, REMACCESS)
- [x] Phase 5.2: EXEC command for script execution
- [x] Phase 5.3: Trie + LRU Cache for efficient file lookups

## Testing

```bash
# Run comprehensive test suite
./test.sh

# Or run quick demo
./demo.sh
```

Test script automatically:
- Starts Name Server and Storage Server
- Runs 10 comprehensive test cases
- Shows pass/fail results
- Cleans up processes

## Documentation

- **[DOCS.md](DOCS.md)** - Complete documentation (architecture, features, network setup, implementation details)
- **README.md** - This file (quick start and overview)

## Requirements

- GCC compiler with C11 support
- POSIX-compliant system (Linux/Unix)
- pthread library

## Authors

Team Atari - CS3 OSN Monsoon 2025
